import { CONFIG } from "./constants";

const randomNumber = () => Math.floor(Math.random() * 1000000) + 1;

const createLoginUrl = ({ clientId, kind, email, theme }) => {
  const baseUrl = getUrlFromEnv(clientId);
  const u = new URL("/start", baseUrl);
  u.searchParams.append("clientId", clientId);
  u.searchParams.append("theme", theme);
  u.searchParams.append("loginSrc", "rn");
  u.searchParams.append("type", kind);
  if (kind === "passwordless") {
    u.searchParams.append("email", email);
  }
  return u.toString();
};

const getUrlFromEnv = (clientId) => {
  if (clientId.split("_").length === 3) {
    const [, env] = clientId.split("_");
    return CONFIG[env];
  }
};
export { randomNumber, createLoginUrl };
